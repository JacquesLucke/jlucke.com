---
import { getCollection } from "astro:content";
import MainHorizontalLine from "../components/MainHorizontalLine.astro";
import MainTopicCard from "../components/MainTopicCard.astro";
import BaseLayout from "../layouts/BaseLayout.astro";
import RecentPostCard from "../components/RecentPostCard.astro";

const allPosts = await getCollection("blog");
allPosts.sort((a, b) => b.data.pubDate.getTime() - a.data.pubDate.getTime());
const recentPosts = allPosts.slice(0, 3);
---

<BaseLayout title="Jacques Lucke">
  <div class="m-3 flex items-center">
    <div class="bg-surface-1 rounded-full w-36 h-36"></div>
    <div class="pl-4 text-lg">
      Hi, I'm Jacques Lucke. I do projects for fun or public benefit.
    </div>
  </div>
  <MainHorizontalLine />
  <div class="w-full flex justify-between">
    <MainTopicCard title="Development" url="/about/" />
    <MainTopicCard title="Teaching" url="/about/" />
    <MainTopicCard title="Photography" url="/about/" />
    <MainTopicCard title="Other" url="/about/" />
  </div>
  <MainHorizontalLine />
  <div>
    {
      recentPosts.map((post) => (
        <RecentPostCard frontmatter={post.data} url={`/posts/${post.id}`} />
      ))
    }
  </div>
  <a href="/blog/">
    <div class="flex justify-center">
      <div class="py-2 rounded p-2 w-fit hover:rounded-xl">See All</div>
    </div>
  </a>
</BaseLayout>
